╔══════════════════════════════════════════════════════════════════════╗
║  🌐 SATP - ТЕСТ ПО СЕТИ (два компьютера)                            ║
╚══════════════════════════════════════════════════════════════════════╝

📋 ИНСТРУКЦИЯ:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

КОМПЬЮТЕР 1 (СЕРВЕР):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. Узнать IP адрес:
   $ hostname -I
   Результат, например: 192.168.1.100

2. Разрешить порт в firewall:
   $ sudo firewall-cmd --add-port=5555/udp --permanent
   $ sudo firewall-cmd --reload
   
   Или временно отключить:
   $ sudo systemctl stop firewalld

3. Запустить сервер:
   $ cd ~/Desktop/uni/research_methods/SATP
   $ ./satp_server
   
   Должно показать:
   [SATP-SERVER] Listening on port: 5555
   [SATP-SERVER] Waiting for clients...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
КОМПЬЮТЕР 2 (КЛИЕНТ):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. Проверить доступность сервера:
   $ ping 192.168.1.100
   Должны идти ответы: 64 bytes from 192.168.1.100...

2. Запустить клиента:
   $ cd ~/Desktop/uni/research_methods/SATP
   $ ./satp_client 192.168.1.100 5555
                   ↑             ↑
               IP сервера    порт

3. Результат:
   [SATP] ✓✓✓ CONNECTION ESTABLISHED ✓✓✓
   [SATP] Session ID: 0x...
   
   Тесты начнут выполняться автоматически!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 ПРОВЕРКА:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

На СЕРВЕРЕ вы должны увидеть:
  [SATP-SERVER] ↓ Received 81 bytes from 192.168.1.101:54321
  [SATP-SERVER] ✓ Session created for device: SMART_CANE_001
  [SATP-SERVER] ✓ DATA from SMART_CANE_001
  [SATP-SERVER] Decrypted data: 51.160360,71.470270,...

На КЛИЕНТЕ вы должны увидеть:
  === Test 1: Navigation Data ===
  [SATP-NET] ↑ Sent DATA (seq: 2, 96 bytes)
  
  === Test 2: Critical Alert ===
  [SATP-NET] ↑ Sent DATA (seq: 3, 102 bytes)
  ...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ TROUBLESHOOTING:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Проблема: "Connection timeout"
  → Проверьте firewall на сервере
  → sudo firewall-cmd --list-ports

Проблема: "No route to host"
  → Убедитесь что оба компьютера в одной сети
  → ping должен работать

Проблема: "Permission denied"
  → Порт 5555 не требует root
  → Но если используете порт < 1024, нужен sudo

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 ДОПОЛНИТЕЛЬНЫЕ КОМАНДЫ:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Посмотреть активные соединения на сервере:
  $ sudo netstat -anp | grep 5555
  $ sudo ss -unp | grep 5555

Проверить открыт ли порт (с клиента):
  $ nc -zvu 192.168.1.100 5555
  $ nmap -sU -p 5555 192.168.1.100

Мониторить UDP трафик (на сервере):
  $ sudo tcpdump -i any port 5555 -n

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ ДОКАЗАТЕЛЬСТВО ДЛЯ ЗАЩИТЫ:

Это демонстрирует что SATP:
  ✓ Использует НАСТОЯЩУЮ UDP сетевую передачу
  ✓ Работает между разными компьютерами
  ✓ Не симуляция!
  ✓ Готов к production

═══════════════════════════════════════════════════════════════════════
